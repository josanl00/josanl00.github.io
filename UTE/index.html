<!doctype html>
<html lang='es'>

<meta charset="utf-8">


<script type="text/javascript" src="static/bower_components/jquery/dist/jquery.min.js" charset="utf-8"></script>
<script type="text/javascript" src="static/bower_components/handlebars/handlebars.min.js" charset="utf-8"></script>
<script type="text/javascript" src="static/bower_components/bootstrap/dist/js/bootstrap.min.js" charset="utf-8"></script>
<link href="static/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css" charset="utf-8"/>
<link href="static/bower_components/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" charset="utf-8"/>
<script type="text/javascript" src="static/bower_components/d3/d3.min.js" charset="utf-8"></script>
<link href="static/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" charset="utf-8"/>

<script src="static/bower_components/src/ematters_UTE.js" charset="utf-8"></script>

<link href="static/bower_components/src/ematters_UTE.css" rel="stylesheet" type="text/css" charset="utf-8"/>


<body>


<div class="container text-center">


<!--HTML: CT105 service-->
<h1>&nbsp;Tu consumo</h1>
<div class="chart-ct105" id="chartct105"></div>
<!--JS: CT105 service-->
<script>
    /*var result_ct105 = {"diffAverageConsumption": -31.4240242081433, "criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 189.998, "companyId": 1234509876.0, "averageEffConsumption": 155.116284761905, "consumptionNumberOfDays": 30.0, "month": 201509.0, "numberCustomers": 68.0, "averageConsumption": 277.062043676471, "diffAverageEffConsumption": 22.4874617720743, "contractId": "000db922b1fc22"};*/
    var result_ct105 = {
    "_id" : "573d8f3b3425d97ba6568b1c",
    "diffAverageConsumption" : {
        "p2" : 136.23,
        "p3" : 78.312,
        "p1" : 114.92
    },
    "averageEffConsumptionNorm" : {
        "p2" : 402.92,
        "p3" : 740.87,
        "p1" : 210.98
    },
    "numberCustomersEff" : 175,
    "consumption" : {
        "p2" : 3808.3,
        "p3" : 5950.3,
        "p1" : 2055.1
    },
    "companyId" : 1917022115,
    "averageEffConsumption" : {
        "p2" : 402.92,
        "p3" : 740.87,
        "p1" : 210.98
    },
    "consumptionNumberOfDays" : 30,
    "setupId" : "558be514dfeb577977e93ee3",
    "numberCustomers" : 581,
    "averageConsumptionNorm" : {
        "p2" : 1612.1,
        "p3" : 3337,
        "p1" : 956.22
    },
    "diffAverageEffConsumptionNorm" : {
        "p2" : 845.17,
        "p3" : 703.15,
        "p1" : 874.1
    },
    "averageConsumption" : {
        "p2" : 1612.1,
        "p3" : 3337,
        "p1" : 956.22
    },
    "diffAverageEffConsumption" : {
        "p2" : 845.17,
        "p3" : 703.15,
        "p1" : 874.1
    },
    "_created" : "2016-05-19T12:02:13.121Z",
    "contractId" : "1666300241",
    "month" : 201511,
    "criteriaSelected" : "activityCode-tariffId",
    "diffAverageConsumptionNorm" : {
        "p2" : 136.23,
        "p3" : 78.312,
        "p1" : 114.92
    }
    };

    var ct105 = Empowering.Graphics.CT105({
        container: "div#chartct105", data: result_ct105, 
        labels: {
            0: "Grupos de similares",
            1: "Tú"
        },
        tariffs: {
            0: "P. Punta",
            1: "P. Llano",
            2: "P. Valle"
        }
    });
</script>

<!--HTML: CT202 service-->
<h1>&nbsp;¿Y los últimos 12 meses?</h1>
<div class="chart-ct202" id="chartct202a"></div>
<div class="col-xs-6">
<div class="chart-ct206" id="chartct202b_cons"></div>
</div>
<div class="col-xs-6">
<div class="chart-ct206" id="chartct202b_avg"></div>
</div>
<!--JS: CT202 service-->
<script>
    var result_ct202 = {
    "contractId": "000db922b1fc22",
    "dailyStats": [{
        "price": 0.10244,
        "day": 201501,
        "consumption": 1.556,
        "timeSlot": "grün"
    }, {
        "price": 0.045102,
        "day": 201501,
        "consumption": 0.523,
        "timeSlot": "gelb"
    }, {
        "price": 0.10713,
        "day": 201501,
        "consumption": 0.996,
        "timeSlot": "rot"
    }, {
        "price": 0.25467,
        "day": 201501,
        "consumption": 3.075,
        "timeSlot": "total"
    }, {
        "price": 0.097148,
        "day": 201502,
        "consumption": 1.45,
        "timeSlot": "grün"
    }, {
        "price": 0.026473,
        "day": 201502,
        "consumption": 0.212,
        "timeSlot": "gelb"
    }, {
        "price": 0.16554,
        "day": 201502,
        "consumption": 1.727,
        "timeSlot": "rot"
    }, {
        "price": 0.28916,
        "day": 201502,
        "consumption": 3.389,
        "timeSlot": "total"
    }, {
        "price": 0.11631,
        "day": 201503,
        "consumption": 1.834,
        "timeSlot": "grün"
    }, {
        "price": 0.022699,
        "day": 201503,
        "consumption": 0.149,
        "timeSlot": "gelb"
    }, {
        "price": 0.15635,
        "day": 201503,
        "consumption": 1.612,
        "timeSlot": "rot"
    }, {
        "price": 0.29536,
        "day": 201503,
        "consumption": 3.595,
        "timeSlot": "total"
    }, {
        "price": 0.13228,
        "day": 201504,
        "consumption": 2.154,
        "timeSlot": "grün"
    }, {
        "price": 0.020423,
        "day": 201504,
        "consumption": 0.111,
        "timeSlot": "gelb"
    }, {
        "price": 0.17488,
        "day": 201504,
        "consumption": 1.844,
        "timeSlot": "rot"
    }, {
        "price": 0.32758,
        "day": 201504,
        "consumption": 4.109,
        "timeSlot": "total"
    }, {
        "price": 0.11531,
        "day": 201505,
        "consumption": 1.814,
        "timeSlot": "grün"
    }, {
        "price": 0.016769,
        "day": 201505,
        "consumption": 0.05,
        "timeSlot": "gelb"
    }, {
        "price": 0.20956,
        "day": 201505,
        "consumption": 2.278,
        "timeSlot": "rot"
    }, {
        "price": 0.34164,
        "day": 201505,
        "consumption": 4.142,
        "timeSlot": "total"
    }, {
        "price": 0.12744,
        "day": 201506,
        "consumption": 2.057,
        "timeSlot": "grün"
    }, {
        "price": 0.16334,
        "day": 201506,
        "consumption": 2.037,
        "timeSlot": "gelb"
    }, {
        "price": 0.29078,
        "day": 201506,
        "consumption": 4.094,
        "timeSlot": "total"
    }, {
        "price": 0.12669,
        "day": 201507,
        "consumption": 2.042,
        "timeSlot": "grün"
    }, {
        "price": 0.30159,
        "day": 201507,
        "consumption": 4.345,
        "timeSlot": "gelb"
    }, {
        "price": 0.42828,
        "day": 201507,
        "consumption": 6.387,
        "timeSlot": "total"
    }, {
        "price": 0.11985,
        "day": 201508,
        "consumption": 1.905,
        "timeSlot": "grün"
    }, {
        "price": 0.018027,
        "day": 201508,
        "consumption": 0.071,
        "timeSlot": "gelb"
    }, {
        "price": 0.14005,
        "day": 201508,
        "consumption": 1.408,
        "timeSlot": "rot"
    }, {
        "price": 0.27793,
        "day": 201508,
        "consumption": 3.384,
        "timeSlot": "total"
    }, {
        "price": 0.11032,
        "day": 201509,
        "consumption": 1.714,
        "timeSlot": "grün"
    }, {
        "price": 0.046,
        "day": 201509,
        "consumption": 0.538,
        "timeSlot": "gelb"
    }, {
        "price": 0.149,
        "day": 201509,
        "consumption": 1.52,
        "timeSlot": "rot"
    }, {
        "price": 0.30532,
        "day": 201509,
        "consumption": 3.772,
        "timeSlot": "total"
    }, {
        "price": 0.10354,
        "day": 201510,
        "consumption": 1.578,
        "timeSlot": "grün"
    }, {
        "price": 0.031564,
        "day": 201510,
        "consumption": 0.297,
        "timeSlot": "gelb"
    }, {
        "price": 0.1001,
        "day": 201510,
        "consumption": 0.908,
        "timeSlot": "rot"
    }, {
        "price": 0.2352,
        "day": 201510,
        "consumption": 2.783,
        "timeSlot": "total"
    }, {
        "price": 0.099643,
        "day": 201511,
        "consumption": 1.5,
        "timeSlot": "grün"
    }, {
        "price": 0.020842,
        "day": 201511,
        "consumption": 0.118,
        "timeSlot": "gelb"
    }, {
        "price": 0.09778,
        "day": 201511,
        "consumption": 0.879,
        "timeSlot": "rot"
    }, {
        "price": 0.21827,
        "day": 201511,
        "consumption": 2.497,
        "timeSlot": "total"
    }, {
        "price": 0.18762,
        "day": 201512,
        "consumption": 3.263,
        "timeSlot": "grün"
    }, {
        "price": 0.02222,
        "day": 201512,
        "consumption": 0.141,
        "timeSlot": "gelb"
    }, {
        "price": 0.22906,
        "day": 201512,
        "consumption": 2.522,
        "timeSlot": "rot"
    }, {
        "price": 0.43889,
        "day": 201512,
        "consumption": 5.926,
        "timeSlot": "total"
    }],
    "month": 201509,
    "summary": [{
        "min": 1.45,
        "max": 3.263,
        "sum": 60.559,
        "timeSlot": "grün",
        "price": 3.7657,
        "mean": 2.0186
    }, {
        "min": 0.05,
        "max": 6.66,
        "sum": 40.667,
        "timeSlot": "gelb",
        "price": 3.0696,
        "mean": 1.3556
    }, {
        "min": 0.774,
        "max": 2.992,
        "sum": 37.606,
        "timeSlot": "rot",
        "price": 3.6108,
        "mean": 1.7094
    }, {
        "min": 2.497,
        "max": 9.273,
        "sum": 138.83,
        "timeSlot": "total",
        "price": 10.446,
        "mean": 4.6277
    }],
    "companyId": 1234509876.0
};
    var ct202a = Empowering.Graphics.CT202A({
        container: "#chartct202a", data: JSON.stringify(result_ct202),
        labels: "consumo",
        units: "kWh/mes",
        types: [
                    "Punta",
                    "Valle",
                    "Llano"
                ]
                ,
        poplabels: {
                    0: "Tarifa",
                    1: "Consumo"
                }
            });
    var ct202b_cons = Empowering.Graphics.CT202B_CONS({
        container: "#chartct202b_cons", data: JSON.stringify(result_ct202),
        //width: 150, height: 150, radius: 75, 
        types: {
                    0: "Punta",
                    1: "Valle",
                    2: "Llano"
                },
        poplabels: {
                    0: "Porcentaje",
                    1: "Consumo"
                }
            });
    var ct202b_avg = Empowering.Graphics.CT202B_AVG({
        container: "#chartct202b_avg", data: JSON.stringify(result_ct202),
        //width: 150, height: 150, radius: 75, 
        types: {
                    0: "Punta",
                    1: "Valle",
                    2: "Llano"
                },
        poplabels: {
                    0: "Porcentaje",
                    1: "Consumo"
                }
            });
</script>


<!--HTML:CT206 service-->
<h1>&nbsp;Factor de Utilización (FU)</h1>
<div class="col-xs-6">
<div class="chart-ct206" id="chartct206_cons"></div>
</div>
<div class="col-xs-6">
<div class="chart-ct206" id="chartct206_avg"></div>
</div>
<!--JS: CT206 service-->
<script>
    var result_ct206 = {"contractId": "000db922b1fc22", "month": 201509.0, "summary": [{"min": 1.45, "max": 3.263, "sum": 60.559, "timeSlot": "grün", "price": 3.7657, "mean": 2.0186}, {"min": 0.05, "max": 6.66, "sum": 40.667, "timeSlot": "gelb", "price": 3.0696, "mean": 1.3556}, {"min": 0.774, "max": 2.992, "sum": 37.606, "timeSlot": "rot", "price": 3.6108, "mean": 1.7094}, {"min": 2.497, "max": 9.273, "sum": 138.83, "timeSlot": "total", "price": 10.446, "mean": 4.6277}], "companyId": 1234509876.0};
    var ct206_cons = Empowering.Graphics.CT206_CONS({
    container: "#chartct206_cons", data: JSON.stringify(result_ct206),
    //width: 150, height: 150, radius: 75, 
    types: {
                0: "Punta",
                1: "Valle",
                2: "Llano"
            },
    poplabels: {
                0: "Porcentaje",
                1: "Consumo"
            }
        });
    var ct206_avg = Empowering.Graphics.CT206_AVG({
    container: "#chartct206_avg", data: JSON.stringify(result_ct206),
    //width: 150, height: 150, radius: 75, 
    types: {
                0: "Punta",
                1: "Valle",
                2: "Llano"
            },
    poplabels: {
                0: "Porcentaje",
                1: "Consumo"
            }
        });
</script>


<!--HTML: CT409 service-->
<h1>&nbsp;Análisis de energía reactiva</h1>
<div id="controlPanel">
  <h1 id="stopButton" class="button">Stop</h1>
  <h1 id="slowButton" class="button">Caution</h1>
  <h1 id="goButton" class="button">Go</h1>
</div>
<div id="traffic-light">
  <div id="stopLight" class="bulb"></div>
  <div id="slowLight" class="bulb"></div>
  <div id="goLight" class="bulb"></div>
</div>
<div class="chart-ct409" id="chartct409"></div>
<!--JS: CT409 service-->
<script>
    ///TRAFFIC LIGHT (TEMPORAL INSERTION)
    ////////////////////////////////////
    document.getElementById('stopButton').onclick = illuminateRed;
    document.getElementById('slowButton').onclick = illuminateYellow;
    document.getElementById('goButton').onclick = illuminateGreen;

    function illuminateRed() {
      clearLights();
      document.getElementById('stopLight').style.backgroundColor = "red";
    }

    function illuminateYellow() {
      clearLights();
      document.getElementById('slowLight').style.backgroundColor = "yellow";
    }

    function illuminateGreen() {
      clearLights();
      document.getElementById('goLight').style.backgroundColor = "green";
    }

    function clearLights() {
      document.getElementById('stopLight').style.backgroundColor = "white";
      document.getElementById('slowLight').style.backgroundColor = "white";
      document.getElementById('goLight').style.backgroundColor = "white";
    }
    ////////////////////////////////////

    var result_ct409 = [{"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 195.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 180.116284761905, "companyId": 1234509876.0, "month": 201410.0, "numberCustomers": 68.0, "averageConsumption": 299.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 186.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 199.116284761905, "companyId": 1234509876.0, "month": 201411.0, "numberCustomers": 68.0, "averageConsumption": 275.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 229.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 210.116284761905, "companyId": 1234509876.0, "month": 201412.0, "numberCustomers": 68.0, "averageConsumption": 289.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 210.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 195.116284761905, "companyId": 1234509876.0, "month": 201501.0, "numberCustomers": 68.0, "averageConsumption": 360.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 198.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 200.116284761905, "companyId": 1234509876.0, "month": 201502.0, "numberCustomers": 68.0, "averageConsumption": 350.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 195.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 180.116284761905, "companyId": 1234509876.0, "month": 201503.0, "numberCustomers": 68.0, "averageConsumption": 320.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 199.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 160.116284761905, "companyId": 1234509876.0, "month": 201504.0, "numberCustomers": 68.0, "averageConsumption": 300.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 165.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 135.116284761905, "companyId": 1234509876.0, "month": 201505.0, "numberCustomers": 68.0, "averageConsumption": 275.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 180.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 155.116284761905, "companyId": 1234509876.0, "month": 201506.0, "numberCustomers": 68.0, "averageConsumption": 265.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 203.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 155.116284761905, "companyId": 1234509876.0, "month": 201507.0, "numberCustomers": 68.0, "averageConsumption": 265.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 200.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 178.116284761905, "companyId": 1234509876.0, "month": 201508.0, "numberCustomers": 68.0, "averageConsumption": 259.062043676471, "contractId": "000db922b1fc22"}, {"criteriaSelected": "buildingId", "numberCustomersEff": 21.0, "consumption": 189.998, "consumptionNumberOfDays": 30.0, "averageEffConsumption": 155.116284761905, "companyId": 1234509876.0, "month": 201509.0, "numberCustomers": 68.0, "averageConsumption": 277.062043676471, "contractId": "000db922b1fc22"}];
    var ct409 = Empowering.Graphics.CT409({
        container: "#chartct409", data: JSON.stringify(result_ct409),
        locale: "es",
        poplabels: { 0: "cosY" }, //width: 1040, height: 400, 
        labels: {
                    0: "Evolución de tus similares",
                    1: "Tu evolución"
                }
            });
</script>

<!--HTML: CT410 service-->
<h1>&nbsp;Análisis de potencia - 13.2 kW</h1>
<div class="chart-ct410" id="chartct410"></div>
<!--JS: CT410 service-->

<script>
    var result_ct410 = [{"contractId": "000db922b1fc22", "month": 201410.0, "temperature": 15.32, "consumption": 195.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201411.0, "temperature": 10.83, "consumption": 186.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201412.0, "temperature": 5.66, "consumption": 229.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201501.0, "temperature": 3.68, "consumption": 210.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201502.0, "temperature": 7.5, "consumption": 198.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201503.0, "temperature": 10.99, "consumption": 195.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201504.0, "temperature": 19.85, "consumption": 199.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201505.0, "temperature": 22.366, "consumption": 165.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201506.0, "temperature": 27.77, "consumption": 180.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201507.0, "temperature": 29.8, "consumption": 203.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201508.0, "temperature": 28.47, "consumption": 200.998, "companyId": 1234509876}, {"contractId": "000db922b1fc22", "month": 201509.0, "temperature": 21.93, "consumption": 189.998, "companyId": 1234509876}];

        var ct410 = Empowering.Graphics.CT410({
            container: '#chartct410', data: JSON.stringify(result_ct410),
            //width: 672, height: 336, 
            locale: "es", 
            units: {
                        0: "kWh",
                        1: "€"
                    },
            labels: {
                        0: "Consumo",
                        1: "Ahorro"
                    }
                });
</script>


</div>


</body>